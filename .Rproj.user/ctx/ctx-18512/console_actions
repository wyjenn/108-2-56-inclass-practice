{
    "type": [
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        2
    ],
    "data": [
        "\nR version 3.6.3 (2020-02-29) -- \"Holding the Windsock\"\nCopyright (C) 2020 The R Foundation for Statistical Computing\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\n\nR æ˜¯å…è²»è»Ÿé«”ï¼Œä¸æä¾›ä»»ä½•æ“”ä¿ã€‚\nåœ¨æŸäº›æ¢ä»¶ä¸‹æ‚¨å¯ä»¥å°‡å…¶è‡ªç”±æ•£å¸ƒã€‚\nç”¨ 'license()' æˆ– 'licence()' ä¾†ç²å¾—æ•£å¸ƒçš„è©³ç´°æ¢ä»¶ã€‚\n\nR æ˜¯å€‹åˆä½œè¨ˆåŠƒï¼Œæœ‰è¨±å¤šäººç‚ºä¹‹åšå‡ºäº†è²¢ç»ã€‚\nç”¨ 'contributors()' ä¾†çœ‹è©³ç´°çš„æƒ…æ³ä¸¦ä¸”\nç”¨ 'citation()' æœƒå‘Šè¨´æ‚¨å¦‚ä½•åœ¨å‡ºç‰ˆå“ä¸­æ­£ç¢ºåœ°åƒç…§ R æˆ– R å¥—ä»¶ã€‚\n\n",
        "ç”¨ 'demo()' ä¾†çœ‹ä¸€äº›ç¤ºç¯„ç¨‹å¼ï¼Œç”¨ 'help()' ä¾†æª¢è¦–ç·šä¸Šè¼”åŠ©æª”æ¡ˆï¼Œæˆ–\nç”¨ 'help.start()' é€éŽ HTML ç€è¦½å™¨ä¾†çœ‹è¼”åŠ©æª”æ¡ˆã€‚\nç”¨ 'q()' é›¢é–‹ Rã€‚\n\n[Workspace loaded from C:/Users/Jenny Wang/Documents/GitHub/108-2-56-inclass-practice/.RData]\n\n",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE)",
        "> ",
        "# å…ˆåŸ·è¡Œæ­¤è¡Œè¼¸å…¥å­¸è™Ÿ(å–®ç¨åŸ·è¡Œ)",
        "> ",
        "readline(prompt = \"è«‹è¼¸å…¥ä½ çš„å­¸è™Ÿ\") -> studentId ",
        "½Ð¿é¤J§Aªº¾Ç¸¹",
        "4108732901",
        "> ",
        "library(stringr)",
        "> ",
        "  warning(\"ä½ æ‰€è¼¸å…¥çš„å­¸è™Ÿä¸æ­£ç¢º\")",
        "> ",
        "  warning(\"incorrect student ID\")",
        "> ",
        "if(!require(lubridate)){ # condition: æ˜¯å¦ã€Œæ²’å®‰è£lubridateã€ï¼Ÿ",
        "+ ",
        "  install.packages(\"lubridate\")",
        "+ ",
        "}",
        "> ",
        "lubridate::ymd_hms(\"2020-07-01 13:00:00 GMT\")",
        "[1] \"2020-07-01 13:00:00 UTC\"\n",
        "> ",
        "convert_TaiwanDate2WesternDate <- function(twDate){",
        "+ ",
        "  library(stringr)",
        "+ ",
        "  regex_pattern <-",
        "+ ",
        "    \"(?<=æ°‘åœ‹)[0-9]+(?=å¹´)\"",
        "+ ",
        "  ",
        "+ ",
        "  # å–å‡ºæ°‘åœ‹å¹´ï¼Œè¨ˆç®—è¥¿å…ƒå¹´",
        "+ ",
        "  year <- ",
        "+ ",
        "    str_extract(",
        "+ ",
        "      twDate,",
        "+ ",
        "      regex_pattern)",
        "+ ",
        "  westernYear <- as.integer(year)+1911",
        "+ ",
        "  ",
        "+ ",
        "  # æ›¿æ›æ°‘åœ‹xxå¹´çš„xxæˆè¥¿å…ƒå¹´æ•¸å­—",
        "+ ",
        "  str_replace(",
        "+ ",
        "    twDate,",
        "+ ",
        "    regex_pattern,  # è¦æ›æŽ‰çš„æ–‡å­—",
        "+ ",
        "    as.character(westernYear) # è¦æ›¿æ›çš„å…§å®¹",
        "+ ",
        "  ) -> twDate_reformat",
        "+ ",
        "  ",
        "+ ",
        "  lubridate::ymd(twDate_reformat) -> westernDate",
        "+ ",
        "  return(westernDate)",
        "+ ",
        "}",
        "> ",
        "",
        "> ",
        "twDate <-  c(\"æ°‘åœ‹108å¹´12æœˆ5æ—¥\",\"æ°‘åœ‹98å¹´10æœˆ5æ—¥\")",
        "> ",
        "convert_TaiwanDate2WesternDate(twDate)",
        "[1] \"2019-12-05\" \"2009-10-05\"\n",
        "> ",
        "askSilly_weather <- function(locationInput,dateInput){",
        "+ ",
        "  jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "  weather_next36hours",
        "+ ",
        "  ",
        "+ ",
        "  (weather_next36hours$cwbopendata$dataset$location$locationName == locationInput) -> pick_location",
        "+ ",
        "  ",
        "+ ",
        "  weather_next36hours$cwbopendata$dataset$location$weatherElement[pick_location][[1]] -> weatherAtLocation",
        "+ ",
        "  (weatherAtLocation$elementName==\"MaxT\") ->",
        "+ ",
        "    pick_MaxT",
        "+ ",
        "  (weatherAtLocation$elementName==\"MinT\") ->",
        "+ ",
        "    pick_MinT",
        "+ ",
        "  weatherAtLocation$time[pick_MaxT][[1]]$parameter$parameterName[[1]] -> maxT",
        "+ ",
        "  weatherAtLocation$time[pick_MinT][[1]]$parameter$parameterName[[1]] -> minT",
        "+ ",
        "  ",
        "+ ",
        "  glue::glue(\"{locationInput} {dateInput} æ°£æº«ï¼Œæœ€é«˜{maxT}åº¦ï¼Œæœ€ä½Ž{minT}åº¦ã€‚\")",
        "+ ",
        "}",
        "> ",
        "# æª¢è¦–æ­¥é©Ÿè€—æ™‚elapse time",
        "> ",
        "system.time(",
        "+ ",
        "  jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "  weather_next36hours",
        "+ ",
        ")",
        "   user  system elapsed \n   0.28    0.11    2.76 \n",
        "> ",
        "if(!exists(\"weather_next36hours\")){",
        "+ ",
        "    jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "    weather_next36hours",
        "+ ",
        "  SOAR::Store(weather_next36hours) # å­˜åœ¨.R_cache environmentä¸­",
        "+ ",
        "}",
        "> ",
        "# æª¢è¦–æ­¥é©Ÿè€—æ™‚elapse time",
        "> ",
        "system.time(",
        "+ ",
        "  jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "  weather_next36hours",
        "+ ",
        ")",
        "   user  system elapsed \n   0.05    0.02    0.28 \n",
        "> ",
        "!exists(\"weather_next36hours\")",
        "[1] FALSE\n",
        "> ",
        "exists(\"weather_next36hours\")",
        "[1] TRUE\n",
        "> ",
        "if(!exists(\"weather_next36hours\")){",
        "+ ",
        "    jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "    weather_next36hours",
        "+ ",
        "  SOAR::Store(weather_next36hours) # å­˜åœ¨.R_cache environmentä¸­",
        "+ ",
        "}",
        "> ",
        "askSilly_weather2 <- function(locationInput,dateInput){",
        "+ ",
        "  if(!exists(\"weather_next36hours\")){",
        "+ ",
        "      jsonlite::fromJSON(\"https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON\") ->",
        "+ ",
        "      weather_next36hours",
        "+ ",
        "    SOAR::Store(weather_next36hours) # å­˜åœ¨.R_cache environmentä¸­",
        "+ ",
        "  }  ",
        "+ ",
        "  (weather_next36hours$cwbopendata$dataset$location$locationName == locationInput) -> pick_location",
        "+ ",
        "  ",
        "+ ",
        "  weather_next36hours$cwbopendata$dataset$location$weatherElement[pick_location][[1]] -> weatherAtLocation",
        "+ ",
        "  (weatherAtLocation$elementName==\"MaxT\") ->",
        "+ ",
        "    pick_MaxT",
        "+ ",
        "  (weatherAtLocation$elementName==\"MinT\") ->",
        "+ ",
        "    pick_MinT",
        "+ ",
        "  weatherAtLocation$time[pick_MaxT][[1]]$parameter$parameterName[[1]] -> maxT",
        "+ ",
        "  weatherAtLocation$time[pick_MinT][[1]]$parameter$parameterName[[1]] -> minT",
        "+ ",
        "  ",
        "+ ",
        "  glue::glue(\"{locationInput} {dateInput} æ°£æº«ï¼Œæœ€é«˜{maxT}åº¦ï¼Œæœ€ä½Ž{minT}åº¦ã€‚\")",
        "+ ",
        "}",
        "> ",
        "system.time(",
        "+ ",
        "  askSilly_weather(\"æ–°åŒ—å¸‚\",today())",
        "+ ",
        ")",
        "   user  system elapsed \n   0.03    0.00    0.31 \n",
        "> ",
        "system.time(",
        "+ ",
        "  askSilly_weather(\"è‡ºåŒ—å¸‚\",today())",
        "+ ",
        ")",
        "   user  system elapsed \n   0.05    0.00    0.35 \n",
        "> ",
        "",
        "> ",
        "askSilly_weather(\"æ–°åŒ—å¸‚\",today())",
        "æ–°åŒ—å¸‚ 2020-06-16 æ°£æº«ï¼Œæœ€é«˜35åº¦ï¼Œæœ€ä½Ž32åº¦ã€‚\n",
        "> ",
        "askSilly_weather(\"è‡ºåŒ—å¸‚\",today())",
        "è‡ºåŒ—å¸‚ 2020-06-16 æ°£æº«ï¼Œæœ€é«˜36åº¦ï¼Œæœ€ä½Ž31åº¦ã€‚\n",
        "> ",
        "SOAR::Remove(weather_next36hours)",
        "Error in loadNamespace(name) : there is no package called â€˜SOARâ€™\n",
        "> ",
        "SOAR::Remove(weather_next36hours)",
        "Error in loadNamespace(name) : there is no package called â€˜SOARâ€™\n",
        "> ",
        "library(SOAR)",
        "Error in library(SOAR) : there is no package called â€˜SOARâ€™\n",
        "> ",
        "library(SOAR)",
        "Error in library(SOAR) : there is no package called â€˜SOARâ€™\n",
        "> ",
        "SOAR::Remove(weather_next36hours)",
        "Error in loadNamespace(name) : there is no package called â€˜SOARâ€™\n",
        "> ",
        "# n ç‚ºå¶æ•¸",
        "> ",
        "n <- 54",
        "> ",
        "fvalue <- n/2",
        "> ",
        "",
        "> ",
        "# n ç‚ºå¥‡æ•¸",
        "> ",
        "n <- 33",
        "> ",
        "fvalue <- -(n+1)/2",
        "> ",
        "(n %% 2)==1 # è¡¨ç¤ºã€Œå¥‡æ•¸ã€; æˆ–...",
        "[1] TRUE\n",
        "> ",
        "",
        "> ",
        "as.logical(n %% 2) # åªæœ‰0æœƒè®ŠFï¼Œå…¶ä»–æ•¸å€¼éƒ½æ˜¯T",
        "[1] TRUE\n",
        "> ",
        "n <- 54",
        "> ",
        "if(as.logical(n %% 2)){",
        "+ ",
        "  fvalue <- -(n+1)/2",
        "+ ",
        "} else {",
        "+ ",
        "  fvalue <- n/2",
        "+ ",
        "}",
        "> ",
        "myFun <- function(n){",
        "+ ",
        "  if(as.logical(n %% 2)){",
        "+ ",
        "    fvalue <- -(n+1)/2",
        "+ ",
        "  } else {",
        "+ ",
        "    fvalue <- n/2",
        "+ ",
        "  }",
        "+ ",
        "  return(fvalue)",
        "+ ",
        "}",
        "> ",
        "",
        "> ",
        "myFun(54)",
        "[1] 27\n",
        "> ",
        "myFun(33)",
        "[1] -17\n",
        "> ",
        "myFun(54)",
        "[1] 27\n",
        "> ",
        "myFun(33)",
        "[1] -17\n",
        "> ",
        "jsonlite::fromJSON(\"https://www.dropbox.com/s/d14j5hp3i5ps657/examSubmissionTimes.json?dl=1\") -> examSubmissionTime",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "head(examSubmissionTime$section)",
        "[1] \"56\" \"78\" \"78\" \"78\" \"56\" \"78\"\n",
        "> ",
        "head(examSubmissionTime$time)",
        "[1] \"2020-05-27 14:49:18\" \"2020-05-27 16:43:41\" \"2020-05-27 16:36:14\" \"2020-05-27 16:36:11\" \"2020-05-27 14:57:03\" \"2020-05-27 15:47:22\"\n",
        "> ",
        "i<-1",
        "> ",
        "student_i_section <- examSubmissionTime$section[[i]]",
        "> ",
        "student_i_time <- examSubmissionTime$time[[i]]",
        "> ",
        "",
        "> ",
        "deadline <- lubridate::ymd_hms(\"2020-05-27 15:00:00\", tz=\"Asia/Taipei\") # ",
        "> ",
        "",
        "> ",
        "howEarly <- deadline - lubridate::ymd_hms(",
        "+ ",
        "  student_i_time, tz=\"Asia/Taipei\") ",
        "> ",
        "print(howEarly)",
        "Time difference of 10.7 mins\n",
        "> ",
        "student_i_section <- examSubmissionTime$section[[i]]",
        "> ",
        "student_i_time <- examSubmissionTime$time[[i]]",
        "> ",
        "i<-1",
        "> ",
        "student_i_section <- examSubmissionTime$section[[i]]",
        "> ",
        "student_i_time <- examSubmissionTime$time[[i]]",
        "> ",
        "",
        "> ",
        "if(student_i_section==\"56\"){",
        "+ ",
        "  deadline <- lubridate::ymd_hms(\"2020-05-27 15:00:00\", tz=\"Asia/Taipei\")",
        "+ ",
        "} else {",
        "+ ",
        "  deadline <- lubridate::ymd_hms(\"2020-05-27 17:00:00\", tz=\"Asia/Taipei\")",
        "+ ",
        "}",
        "> ",
        "",
        "> ",
        "howEarly <- deadline - lubridate::ymd_hms(student_i_time, tz=\"Asia/Taipei\")",
        "> ",
        "print(howEarly)",
        "Time difference of 10.7 mins\n",
        "> ",
        "",
        "> ",
        "compute_howEarly <- function(student_i_section, student_i_time){",
        "+ ",
        "  # student_i_section <- examSubmissionTime$section[[i]]",
        "+ ",
        "  # student_i_time <- examSubmissionTime$time[[i]]",
        "+ ",
        "  ",
        "+ ",
        "  if(student_i_section==\"56\"){",
        "+ ",
        "    deadline <- lubridate::ymd_hms(\"2020-05-27 15:00:00\", tz=\"Asia/Taipei\")",
        "+ ",
        "  } else {",
        "+ ",
        "    deadline <- lubridate::ymd_hms(\"2020-05-27 17:00:00\", tz=\"Asia/Taipei\")",
        "+ ",
        "  }",
        "+ ",
        "  ",
        "+ ",
        "  howEarly <- deadline - lubridate::ymd_hms(student_i_time, tz=\"Asia/Taipei\")",
        "+ ",
        "  # print(howEarly)",
        "+ ",
        "  ",
        "+ ",
        "  return(howEarly)",
        "+ ",
        "}",
        "> ",
        "compute_howEarly(examSubmissionTime$section[[1]],examSubmissionTime$time[[1]])",
        "Time difference of 10.7 mins\n",
        "> ",
        "compute_howEarly(examSubmissionTime$section[[2]],examSubmissionTime$time[[2]])",
        "Time difference of 16.31667 mins\n",
        "> ",
        "compute_howEarly(examSubmissionTime$section[[3]],examSubmissionTime$time[[3]])",
        "Time difference of 23.76667 mins\n",
        "> ",
        "studentSequence <- 1:length(examSubmissionTime$section)",
        "> ",
        "",
        "> ",
        "map(studentSequence,",
        "+ ",
        "    ~compute_howEarly(",
        "+ ",
        "      examSubmissionTime$section[[.x]],",
        "+ ",
        "      examSubmissionTime$time[[.x]])",
        "+ ",
        "    ) -> list_howEarly",
        "Error in map(studentSequence, ~compute_howEarly(examSubmissionTime$section[[.x]],  : \n  could not find function \"map\"\n",
        "> ",
        "studentSequence <- 1:length(examSubmissionTime$section)",
        "> ",
        "",
        "> ",
        "map(studentSequence,",
        "+ ",
        "    ~compute_howEarly(",
        "+ ",
        "      examSubmissionTime$section[[.x]],",
        "+ ",
        "      examSubmissionTime$time[[.x]])",
        "+ ",
        "    ) -> list_howEarly",
        "Error in map(studentSequence, ~compute_howEarly(examSubmissionTime$section[[.x]],  : \n  could not find function \"map\"\n",
        "> ",
        "library(magrittr)",
        "> ",
        "list_howEarly %>%",
        "+ ",
        "  unlist() -> examSubmissionTime$howEarly",
        "Error in eval(lhs, parent, parent) : object 'list_howEarly' not found\n",
        "> ",
        "library(magrittr)",
        "> ",
        "library(magrittr)",
        "> ",
        "list_howEarly %>%",
        "+ ",
        "  unlist() -> examSubmissionTime$howEarly",
        "Error in eval(lhs, parent, parent) : object 'list_howEarly' not found\n",
        "> ",
        "studentSequence <- 1:length(examSubmissionTime$section)",
        "> ",
        "",
        "> ",
        "map(studentSequence,",
        "+ ",
        "    ~compute_howEarly(",
        "+ ",
        "      examSubmissionTime$section[[.x]],",
        "+ ",
        "      examSubmissionTime$time[[.x]])",
        "+ ",
        "    ) -> list_howEarly",
        "Error in map(studentSequence, ~compute_howEarly(examSubmissionTime$section[[.x]],  : \n  could not find function \"map\"\n",
        "\nRestarting R session...\n\n"
    ]
}